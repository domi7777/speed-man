<html>
  <head>
    <title>Cross domain communication with cookies</title>
    
  </head>
  <body>
    
    <h3>Cross domain communication - cookies </h3>
    
    <script>
      window.addEventListener("message", receiveMessage, false);

      function receiveMessage(event){
        if(event.data == 'post') {
          console.log(event);
          document.cookie = "username=John Doe; expires=Thu, 18 Dec 2020 12:00:00 UTC; path=/";
          var x = document.cookie;
          alert("cookie set: " + x);
        } else if(event.data == 'get') {
          var x = document.cookie;
          parent.postMessage(JSON.stringify(x), '*');
        }
      }
    </script>
  </body>
</html>
